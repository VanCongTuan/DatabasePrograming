
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tìm chuyến bay</title>
    <link rel="stylesheet" href="~/Content/static/css/TimChuyenBay.css">
    <link rel="stylesheet" href="~/Content/static/css/Chuyenbay.css">
    <script type="text/javascript" src="~/Content/static/javascript/cb.js"></script>
    <link rel="icon" href="https://img.icons8.com/isometric/50/airplane-mode-on--v1.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    @Html.Raw("<script src=\"https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js\" integrity=\"sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p\" crossorigin=\"anonymous\"></script>")

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
          integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

</head>
<body onload="move('@ViewBag.dayStart')">
    <div class="parent">


        <h4>Chuyến bay từ: @ViewBag.noidi ------------> @ViewBag.noiden</h4>
        <form action="/DatCho" method="post">
            <div class="cover">
                <div class="dropdown-contentTimChuyenBay container swiper mySwiper">
                    <div class="my-row swiper-wrapper" style="height: 100px; width: 100px;">

                        @*@foreach (var date in ViewBag.daterange)
                        {
                            <div class="my-column border border-1 swiper-slide" style="background-color:#aaa;">
                                <a class="loadFlights" href="/chuyenbay?time=@date.ToString("yyyy-MM-dd")"
                                   style="text-decoration: none;">
                                    <h3>@date.ToString("dddd")</h3>
                                    <p>@date.ToString("dd/MM/yyyy")</p>
                                </a>
                            </div>
                        }*@
                    </div>
                </div>
                <div class="swiper-pagination">
                    <button id="prev" type="button"><</button>
                    <button id="next" type="button">></button>
                </div>
            </div>
            <div class="container mt-3">
                <div id="accordion">

                    @foreach (var item in ViewBag.LichBayArr)
                    {
                        <div class="card mt-10" style="height: 1000px; width: 1000px;">
                            <div class="card-header w-100">
                                <a class="btn w-100" data-bs-toggle="collapse" href="#collapse  @item.chuyenBayId">
                                    <div class="tb-details w-100">
                                        <table class="table ">
                                            <thead>
                                                <tr>
                                                    <th>Chuyến bay</th>
                                                    <th>Khởi hành</th>
                                                    <th>Thời gian đi (tiếng)</th>
                                                    <th>Giá</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>@item.chuyenBayId</td>
                                                    <td>@item.NgayBay </td>
                                                    <td>@item.ThoiGianBay</td>
                                                    <td>@ViewBag.GiaVe</td>

                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </a>
                                @*<div onclick="addFlight('@item.MaLB', '@item.NgayBay', '@item.NgayBay', '@ViewBag.noidi', '@ViewBag.noiden', '@item.MayBay', '@ViewBag.GiaVe * ViewBag.soluongngl + 700000', '@ViewBag.GiaVe * 0.7 * ViewBag.soluongtre + 700000 * ViewBag.soluongtre')" class="btn-next">
                                    <button type="submit" class="btn btn-success btn-form">Tiếp tục</button>
                                    
                                </div>*@

                                <div id="collapse @item.chuyenBayId" class="collapse" data-bs-parent="#accordion">
                                    <div class="card-body mt-1">
                                        <div class="container flight-info">
                                            <div>
                                                <h3>THÔNG TIN CHUYẾN BAY</h3>
                                                <div>Số hiệu chuyến bay:@item.chuyenBayId</div>
                                                <div>
                                                    <div class="d-flex mb-3">
                                                        <div class="p-2 flex-fill time-place">
                                                            <div>@item.NgayBay (Giờ địa phương)</div>
                                                            <div class="place"><span class="dep"></span></div>
                                                        </div>
                                                        <div class="p-2 flex-fill ">
                                                            <i class="fa-solid fa-plane fa-lg straight-line" style="color: #df1709;"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>                              
                                <div>
                                    <h3>CHI TIẾT VÉ MÁY BAY</h3>
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Hành khách</th>
                                                <th>Giá Chuyến bay</th>
                                                <th>Thuế phí</th>
                                                <th>Tổng</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Người lớn: @ViewBag.soluongngl </td>
                                                <td>@String.Format("{0:0,0} VNĐ", @ViewBag.GiaVe * ViewBag.soluongngl) VNĐ</td>
                                                <td>100 $</td>
                                                <td>@String.Format("{0:0,0} VNĐ", @ViewBag.GiaVe * @ViewBag.soluongngl +100 * @ViewBag.soluongngl)</td>
                                            </tr>
                                            @if (@ViewBag.soluongtre != 0)
                                            {
                                                <tr>
                                                    <td>Trẻ em:@ViewBag.soluongtre</td>
                                                    <td>@String.Format("{0:0,0} VNĐ", @ViewBag.GiaVe * ViewBag.soluongtre) VNĐ</td>
                                                    <td>50 $</td>
                                                    <td>@String.Format("{0:0,0} VNĐ", @ViewBag.GiaVe * ViewBag.soluongtre + 50 * @ViewBag.soluongngl)</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                    <div>
                                        <h4>
                                                Tổng cộng: <span class="total">@String.Format("{0:0,0 VNĐ}", (@ViewBag.GiaVe * ViewBag.soluongngl + 100 * ViewBag.soluongngl) + (@ViewBag.GiaVe * 0.7 * ViewBag.soluongtre + 100 * ViewBag.soluongtre)) $</span>
                                            </h4>
                                        <h5>- Giá vé thay đổi theo thời gian thực</h5>
                                        <h5>- Vé không hoàn đổi trừ thương gia</h5>
                                        <h5>- Chưa bao gồm hành lí kí gửi</h5>
                                        <div onclick="addFlight('@item.MaLB', '@item.NgayBay', '@item.NgayBay', '@ViewBag.noidi', '@ViewBag.noiden', '@item.MayBay', '@ViewBag.GiaVe * ViewBag.soluongngl + 800', '@ViewBag.GiaVe * 0.7 * ViewBag.soluongtre + 800 * ViewBag.soluongtre')" class="btn-next">
                                            <button type="submit" class="btn btn-success btn-form">Tiếp tục</button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    }
                    <a href="/" class="btn-back">
                        <button type="button" class="btn btn-danger">Quay lại trang chủ</button>
                    </a>


                </div>
            </div>
        </form>

    </div>
    <script src="@Url.Content("~/Content/static/js/ChuyenBay.js")"></script>

</body>
</html>


